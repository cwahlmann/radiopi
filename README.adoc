= RadioPi - a raspberry pi internet radio

image:screenshots/radio_pi_07.jpg[Radio Pi,width=60%]

== What is needed?
=== Hardware

* a Raspberry Pi
* a WLAN dongle (for Raspberry < V3)
* a 3.2" touchscreen LCD Display (320x240 px)
* (optional) an acryl case that fits with the display
* (optional) some powerbank

=== Software

* Raspbian OS lite (a headless linux)
* LCD touchscreen display driver (see your documentation where to obtain this)

=== additional content included

* RadioPI uses the services of http://www.radio-browser.info . *Thanks a lot!!*
* the free font package `dejavu-fonts-ttf-2.37`, see https://dejavu-fonts.github.io

== Setup

update raspbian::
[source, bash]
----
sudo apt-get update
sudo apt-get upgrade
----

install the LCD 3.2 display fb-driver::
* *Only install the kernel driver.* Do not route X (that should not be there, because of "Raspbian OS lite") or the text-console to the LCD-Display!
* See your documentation how to setup the driver.
The following instructions f.e. will install a display from `joy-IT`:
[source, bash]
----
# append the following lines to /boot/config.txt
sudo nano /boot/config.txt

dtparam=spi=on
dtoverlay=joy-IT-Display-Driver-32b-overlay:rotate=270,swapxy=1

# get and install the display driver
wget anleitung.joy-it.net/upload/joy-IT-Display-Driver-32b-overlay.dtb
sudo cp joy-IT-Display-Driver-32b-overlay.dtb /boot/overlays/joy-IT-Display-Driver-32b-overlay.dtbo
----

install additional software::
* `vlc` for playback
* `python3` (may be already installed)
* some `python3` libraries

[source, bash]
----
sudo apt-get install vlc
sudo apt-get install python3
sudo apt-get install python3-pip
sudo apt-get install python3-pygame
sudo pip3 install requests evdev
----

install `RadioPi`::
* copy folder `RadioPi` to `/home/pi`
* make shell-scripts executable

[source, bash]
----
pi@raspberrypi:~ $ cd RadioPi
pi@raspberrypi:~/RadioPi $ chmod +x *.sh
pi@raspberrypi:~/RadioPi $ chmod +x network/*.sh
----

test installed libraries::
[source, bash]
----
pi@raspberrypi:~/RadioPi python3 testlib.py
pygame 1.9.4
Hello from the pygame community. https://www.pygame.org/contribute.html
=> all required python libs available
----

make `RadioPi` start at boot - add `/home/pi/RadioPi/startup.sh` to `/etc/rc.local`::
[source, bash]
----
#!/bin/sh -e
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.

# Print the IP address
_IP=$(hostname -I) || true
if [ "$_IP" ]; then
  printf "My IP address is %s\n" "$_IP"
fi

# start RadioPi
/home/pi/RadioPi/startup.sh

exit 0
----

reboot system::
[source, bash]
----
sudo reboot
----

*Problems? send a note to `christian at dreierschach.de` :-)*

== Screenshots

[cols="1,1"]
|===
a|Settings view - no connection::
image:screenshots/radio_pi_01.jpg[Radio Pi]
a|Settings view - change WLAN::
image:screenshots/radio_pi_02.jpg[Radio Pi]

a|Select view - initially loading list of radio stations::
image:screenshots/radio_pi_00.jpg[Radio Pi]
a|Select view - with list of stations::
image:screenshots/radio_pi_03.jpg[Radio Pi]

a|Select view - only show favourites::
image:screenshots/radio_pi_04.jpg[Radio Pi]
a|Select view - filtered by "SWR" string::
image:screenshots/radio_pi_05.jpg[Radio Pi]

a|Play view - play selected radio station::
image:screenshots/radio_pi_06.jpg[Radio Pi]
a|Screensaver::
image:screenshots/radio_pi_08.jpg[Radio Pi]
